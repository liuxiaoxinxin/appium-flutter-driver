import { FlutterDriver } from '../driver';

const imgError = "data:image/png;base64,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";

export const getScreenshot = async function(this: FlutterDriver) {
  if (this.currentContext === 'NATIVE_APP') {
    return this.proxydriver.getScreenshot();
  }
  let response;
  try {
    response  = await this.socket!.call(`_flutter.screenshot`) as any;
  } catch (error) {
    console.log("截屏遇到错误:", error);
  }
  return response ?  response.screenshot : imgError;
};
